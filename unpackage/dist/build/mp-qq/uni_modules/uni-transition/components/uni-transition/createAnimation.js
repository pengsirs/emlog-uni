"use strict";var t=Object.defineProperty,e=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,r=(e,n,i)=>n in e?t(e,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[n]=i,s=require("../../../../common/vendor.js");class a{constructor(t,e){this.options=t,this.animation=s.index.createAnimation(t),this.currentStepAnimates={},this.next=0,this.$=e}_nvuePushAnimates(t,e){let n=this.currentStepAnimates[this.next],i={};if(i=n||{styles:{},config:{}},o.includes(t)){i.styles.transform||(i.styles.transform="");let n="";"rotate"===t&&(n="deg"),i.styles.transform+=`${t}(${e+n}) `}else i.styles[t]=`${e}`;this.currentStepAnimates[this.next]=i}_animateRun(t={},s={}){let a=this.$.$refs.ani.ref;if(a)return new Promise(((o,l)=>{nvueAnimation.transition(a,((t,s)=>{for(var a in s||(s={}))n.call(s,a)&&r(t,a,s[a]);if(e)for(var a of e(s))i.call(s,a)&&r(t,a,s[a]);return t})({styles:t},s),(t=>{o()}))}))}_nvueNextAnimate(t,e=0,n){let i=t[e];if(i){let{styles:r,config:s}=i;this._animateRun(r,s).then((()=>{e+=1,this._nvueNextAnimate(t,e,n)}))}else this.currentStepAnimates={},"function"==typeof n&&n(),this.isEnd=!0}step(t={}){return this.animation.step(t),this}run(t){this.$.animationData=this.animation.export(),this.$.timer=setTimeout((()=>{"function"==typeof t&&t()}),this.$.durationTime)}}const o=["matrix","matrix3d","rotate","rotate3d","rotateX","rotateY","rotateZ","scale","scale3d","scaleX","scaleY","scaleZ","skew","skewX","skewY","translate","translate3d","translateX","translateY","translateZ"];o.concat(["opacity","backgroundColor"],["width","height","left","right","top","bottom"]).forEach((t=>{a.prototype[t]=function(...e){return this.animation[t](...e),this}})),exports.createAnimation=function(t,e){if(e)return clearTimeout(e.timer),new a(t,e)};
