"use strict";var e=require("./prism.min.js"),s=require("../parser.js");function t(e){this.vm=e}t.prototype.onParse=function(t,n){if("pre"===t.name){let r;for(r=t.children.length;r--&&"code"!==t.children[r].name;);if(-1===r)return;const a=t.children[r];let l,i=a.attrs.class||"";for(r=i.indexOf("language-"),-1===r&&(i=t.attrs.class||"",r=i.indexOf("language-")),-1===r&&(i="language-text",r=i.indexOf("language-")),r+=9,l=r;l<i.length&&" "!==i[l];l++);const c=i.substring(r,l);if(a.children.length){const r=this.vm.getText(a.children).replace(/&amp;/g,"&");if(!r)return;t.c&&(t.c=void 0),e.Prism.languages[c]&&(a.children=new s.Parser(this.vm).parse("<pre>"+e.Prism.highlight(r,e.Prism.languages[c],c).replace(/token /g,"hl-")+"</pre>")[0].children),t.attrs.class="hl-pre",a.attrs.class="hl-code",t.children.push({name:"div",attrs:{class:"hl-language",style:"user-select:none"},children:[{type:"text",text:c}]}),t.attrs.style+=(t.attrs.style||"")+";user-select:none",t.attrs["data-content"]=r,n.expose();{const e=[];for(let s=r.split("\n").length;s--;)e.push({name:"span",attrs:{class:"span"}});t.children.push({name:"span",attrs:{class:"line-numbers-rows"},children:e})}}}},exports.Highlight=t;
