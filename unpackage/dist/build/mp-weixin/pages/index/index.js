"use strict";var a=require("../../common/vendor.js"),t=require("../../api.js"),o=require("../../setting.js");const e={data:()=>({dataa:[],avatarUrl:"../../static/logo.png",$req_time:"",$sign:"",page:1,shoulu:"",description:"",di:!1,backTopValue:!1,onRefresh:!1,status:"loading",blogSorts:[],images:["http://cdn.hkiii.cn//img/_2022/06/21/09/52/42/167/6483441/13482961188039425428","http://cdn.hkiii.cn//img/_2022/06/21/09/52/42/181/6483441/13482961192300838800","http://cdn.hkiii.cn//img/_2022/06/21/09/52/42/172/6483441/13482961190153354896"],opacity:["opacity:0.1;background:#fff;","opacity:0.125;background:#fff;","opacity:0.15;background:#fff;","opacity:0.175;background:#fff;","opacity:0.2;background:#fff;","opacity:0.225;background:#fff;","opacity:0.25;background:#fff;","opacity:0.275;background:#fff;","opacity:0.3;background:#fff;","opacity:0.325;background:#fff;","opacity:0.375;background:#fff;","opacity:0.4;background:#fff;","opacity:0.425;background:#fff;","opacity:0.45;background:#fff;","opacity:0.475;background:#fff;","opacity:0.5;background:#fff;","opacity:0.525;background:#fff;","opacity:0.55;background:#fff;","opacity:0.575;background:#fff;","opacity:0.6;background:#fff;","opacity:0.625;background:#fff;","opacity:0.65;background:#fff;","opacity:0.675;background:#fff;","opacity:0.7;background:#fff;","opacity:0.725;background:#fff;","opacity:0.75;background:#fff;","opacity:0.775;background:#fff;","opacity:0.8;background:#fff;","opacity:0.825;background:#fff;","opacity:0.85;background:#fff;","opacity:0.875;background:#fff;","opacity:0.9;background:#fff;","opacity:0.925;background:#fff;","opacity:0.95;background:#fff;","opacity:0.975;background:#fff;"],scrollTop:0,old:{scrollTop:0},blogAll:"",current:0,scrollinto:"",appData:""}),mounted(){},onLoad(){this.blog(1),this.getSorts(),this.getData()},onShow(){var t=this;a.index.getStorage({key:"avatarUrl",success:function(a){t.avatarUrl=a.data}})},onReachBottom(){this.page=this.page+1,this.blog(this.page)},onPullDownRefresh(){this.dataa="",this.status="loading",this.page=1,this.blog(this.page),a.index.stopPullDownRefresh()},onPageScroll:function(a){var t=a.scrollTop>500;this.backTopValue=t},onShareAppMessage(a){return"button"===a.from&&console.log(a.target),{title:"分享好玩的程序！",imageUrl:this.appData.data.shareimg,path:"pages/index/index"}},methods:{copyUrl(){a.index.setClipboardData({data:this.appData.data.downurl,success:function(){a.index.showModal({title:"温馨提示",content:"复制成功"})}})},copyQQ(){a.index.setClipboardData({data:this.appData.data.qq,success:function(){a.index.showModal({title:"温馨提示",content:"复制成功"})}})},async getData(){const e=await t.htRequest({url:"/index.php/index/index/get_miniapp",method:"POST",data:{setapi:o.set.setapi}});this.appData=e.data,a.index.setStorage({key:"appData",data:e.data})},change(t,o){a.index.navigateTo({url:"../sort-info/sort-info?id="+o}),this.current=t,this.scrollinto="tab"+t},onChangeTab(a){this.change(a.detail.current)},getUser(){a.index.switchTab({url:"../home/home"})},showDrawer(a){this.$refs[a].open()},closeDrawer(a){this.$refs[a].close()},delHtmlTag(a){var t=RegExp("<.*?>+|\n|\r","ig");return a.replace(t,"")},imageError(a,t){this.dataa[t].cover="http://cdn.hkiii.cn//img/_2022/06/29/01/38/12/502/6483441/11289324486965076622"},getimg(a){var t=a.match(/<img.+?src=[\'\"]?([^\'\"]*)[\'\"]?/i);return null!=t&&t[1]},toInfo(t,o){a.index.navigateTo({url:"/pages/blog-info/blog-info?id="+t+"&url="+encodeURIComponent(o)})},search(t){a.index.navigateTo({url:"../search/search?search="+t.value})},messageToggle(a){this.msgType=a,this.messageText=`这是一条${a}消息提示`,this.$refs.message.open()},xhj(){a.index.pageScrollTo({scrollTop:0,duration:300})},async blog(a){const o=await t.myRequest({url:"/?rest-api=article_list",method:"GET",data:{page:a,count:10}});""==o.data.data.articles?this.status="no-more":this.dataa=[...this.dataa,...o.data.data.articles]},async blogall(){const a=await t.myRequest({url:"/?rest-api=article_list",method:"GET",data:{count:999}});this.blogAll=[...this.blogAll,...a.data.data.articles]},async getSorts(){const a=await t.myRequest({url:"/?rest-api=sort_list",method:"GET"});this.blogSorts=a.data.data.sorts}}};if(!Array){(a.resolveComponent("uni-icons")+a.resolveComponent("uni-search-bar")+a.resolveComponent("uni-drawer")+a.resolveComponent("uni-notice-bar")+a.resolveComponent("uni-load-more"))()}Math||((()=>"../../uni_modules/uni-icons/components/uni-icons/uni-icons.js")+(()=>"../../uni_modules/uni-search-bar/components/uni-search-bar/uni-search-bar.js")+(()=>"../../uni_modules/uni-drawer/components/uni-drawer/uni-drawer.js")+(()=>"../../uni_modules/uni-notice-bar/components/uni-notice-bar/uni-notice-bar.js")+(()=>"../../uni_modules/uni-load-more/components/uni-load-more/uni-load-more.js"))();var i=a._export_sfc(e,[["render",function(t,o,e,i,r,n){return a.e({a:a.p({type:"settings",color:"#007AFF\t",size:"30"}),b:a.o((a=>n.showDrawer("showLeft"))),c:a.p({color:"#999999",size:"18",type:"home"}),d:a.o(n.search),e:a.o(n.search),f:a.p({radius:5,placeholder:"请输入要搜索的内容",cancelButton:"none",bgColor:"#eee","cancel-text":"搜索"}),g:a.o((a=>n.getUser())),h:r.avatarUrl,i:a.f(r.blogSorts,((t,o,e)=>({a:a.t(t.sortname),b:o,c:"tab"+o,d:a.n(r.current==o?"active":""),e:a.o((a=>n.change(o,t.sid)),o)}))),j:a.sr("showLeft","02d9e768-3"),k:a.p({mode:"left",width:320}),l:a.f(r.images,((t,o,e)=>({a:t,b:a.n("swiper-item"+o),c:o}))),m:a.f(r.opacity,((t,o,e)=>({a:a.s(t)}))),n:a.p({"show-icon":!0,scrollable:!0,"background-color":"#fff",color:"#000",text:r.appData.data.gonggao}),o:1!=r.appData.downurl},1!=r.appData.downurl?{p:a.p({color:"#fd7081",type:"star-filled",size:"30"}),q:a.o((a=>n.copyUrl())),r:a.p({color:"#aaa",type:"circle-filled",size:"20"}),s:a.p({color:"#66ccff",type:"qq",size:"30"}),t:a.o((a=>n.copyQQ())),v:a.p({color:"#aaa",type:"circle-filled",size:"20"})}:{},{w:r.backTopValue},r.backTopValue?{x:a.o(((...a)=>n.xhj&&n.xhj(...a)))}:{},{y:a.f(r.dataa,((t,o,e)=>a.e({a:n.getimg(t.description)||t.cover},n.getimg(t.description)||t.cover?a.e({b:a.o((a=>n.imageError(a,o))),c:t.cover||n.getimg(t.description),d:"y"==t.top},(t.top,{}),{e:a.t(t.title),f:a.t(n.delHtmlTag(t.description)),g:a.t(t.sort_name),h:"02d9e768-9-"+e,i:a.p({type:"fire-filled",size:"17"}),j:a.t(t.views),k:"02d9e768-10-"+e,l:a.p({type:"chat-filled",size:"17"}),m:a.t(t.comnum),n:a.o((a=>n.toInfo(t.id,t.url)))}):{},{o:!n.getimg(t.description)&&""==t.cover},n.getimg(t.description)||""!=t.cover?{}:a.e({p:"y"==t.top},(t.top,{}),{q:a.t(t.title),r:a.t(n.delHtmlTag(t.description)),s:a.t(t.sort_name),t:"02d9e768-11-"+e,v:a.p({type:"fire-filled",size:"17"}),w:a.t(t.views),x:"02d9e768-12-"+e,y:a.p({type:"chat-filled",size:"17"}),z:a.t(t.comnum),A:a.o((a=>n.toInfo(t.id,t.url)))}),{B:o}))),z:a.p({color:"#007AFF",status:r.status})})}]]);e.__runtimeHooks=3,wx.createPage(i);
