"use strict";var a=require("../../common/vendor.js"),o=require("../../api.js");require("../../setting.js");const t={data:()=>({shoulu:"",sogo:"",height:"0%",avatarUrl:"../../static/logo.png",nickName:"点击登录",homelist:[{img:"../../static/home/bangzhuzhongxin.png",text:"问题反馈",url:"../about/help"},{img:"../../static/home/guanyuwomen.png",text:"关于我们",url:"../about/about"},{img:"../../static/home/zhanghuguanli.png",text:"程序管理",url:"../setting/admin"}],appData:[],opacity:["opacity:0.1;background:#fff;","opacity:0.125;background:#fff;","opacity:0.15;background:#fff;","opacity:0.175;background:#fff;","opacity:0.2;background:#fff;","opacity:0.225;background:#fff;","opacity:0.25;background:#fff;","opacity:0.275;background:#fff;","opacity:0.3;background:#fff;","opacity:0.325;background:#fff;","opacity:0.375;background:#fff;","opacity:0.4;background:#fff;","opacity:0.425;background:#fff;","opacity:0.45;background:#fff;","opacity:0.475;background:#fff;","opacity:0.5;background:#fff;","opacity:0.525;background:#fff;","opacity:0.55;background:#fff;","opacity:0.575;background:#fff;","opacity:0.6;background:#fff;","opacity:0.625;background:#fff;","opacity:0.65;background:#fff;","opacity:0.675;background:#fff;","opacity:0.7;background:#fff;","opacity:0.725;background:#fff;","opacity:0.75;background:#fff;","opacity:0.775;background:#fff;","opacity:0.8;background:#fff;","opacity:0.825;background:#fff;","opacity:0.85;background:#fff;","opacity:0.875;background:#fff;","opacity:0.9;background:#fff;","opacity:0.925;background:#fff;","opacity:0.95;background:#fff;","opacity:0.975;background:#fff;"]}),mounted(){},onShow(){var o=this;a.index.getStorage({key:"appData",success:function(a){o.appData=a.data}}),a.index.getStorage({key:"avatarUrl",success:function(a){o.avatarUrl=a.data}}),a.index.getStorage({key:"nickName",success:function(a){o.nickName=a.data}}),a.index.getStorage({key:"shoulu",success:function(a){o.shoulu=a.data},fail:function(){o.baidu("/baidupages/index","shoulu")}}),a.index.getStorage({key:"sogo",success:function(a){o.sogo=a.data},fail:function(){o.baidu("/sogoupages/index","sogo")}})},onLoad(){this.height="height:0%"},methods:{close(){this.height="height:0%"},login(){this.height="height:40%"},loginqw(){this.getUser("weixin")},getUser(o){var t=this;a.index.login({provider:o,success:function(e){console.log(e.authResult),a.index.getUserInfo({provider:o,success:function(o){t.avatarUrl=o.userInfo.avatarUrl,t.nickName=o.userInfo.nickName,a.index.setStorage({key:"nickName",data:o.userInfo.nickName}),a.index.setStorage({key:"avatarUrl",data:o.userInfo.avatarUrl})}})}}),this.height="height:0%"},clear(){a.index.showModal({title:"温馨提示",content:"这样会清空您的个人设置，请谨慎操作！",success:function(o){o.confirm?(a.index.clearStorage(),a.index.showToast({title:"清除成功",duration:2e3}),a.index.reLaunch({url:"../index/index"})):o.cancel&&console.log("用户点击取消")}})},about(){a.index.navigateTo({url:"../about/about"})},shua(o){var t=this;a.index.showModal({title:"温馨提示",content:"确定要刷新吗？（过多刷新会造成资源浪费）",success:function(a){a.confirm?"baidu"==o?t.baidu("/baidupages/index","shoulu"):"sogo"==o&&t.baidu("/sogoupages/index","sogo"):a.cancel&&console.log("用户点击取消")}})},go(o){"setting"==o?a.index.openSetting({}):a.index.navigateTo({url:o})},async baidu(t,e){var i=this,c=i.appData.data.blogurl.replace(/^https?\:\/\//i,"");const n=await o.apiRequest({url:t,method:"GET",data:{key:i.appData.data.tianapi,domain:c}});a.index.setStorage({key:e,data:n.data.newslist[0].count}),i[e]=n.data.newslist[0].count}}};if(!Array){a.resolveComponent("uni-icons")()}Math;var e=a._export_sfc(t,[["render",function(o,t,e,i,c,n){return a.e({a:"200"==c.appData.code},"200"==c.appData.code?{b:c.avatarUrl,c:a.t(c.nickName),d:a.o((a=>n.loginqw())),e:a.f(c.opacity,((o,t,e)=>({a:a.s(o)}))),f:a.o((a=>n.go("setting"))),g:a.f(c.homelist,((o,t,e)=>({a:o.img,b:a.t(o.text),c:a.o((a=>n.go(o.url)))}))),h:a.p({color:"#88CFFF",type:"vip-filled",size:"30"}),i:a.t(c.shoulu||"获取中..."),j:a.o((a=>n.shua("baidu"))),k:a.p({color:"#aaa",type:"refreshempty",size:"20"}),l:a.p({color:"#E3BDA4",type:"color-filled",size:"30"}),m:a.t(c.sogo||"获取中..."),n:a.o((a=>n.shua("sogo"))),o:a.p({color:"#aaa",type:"refreshempty",size:"20"}),p:a.o((a=>n.clear())),q:a.o((a=>n.about())),r:a.p({type:"closeempty",color:"#fff",size:"30"}),s:a.o((a=>n.close())),t:a.p({type:"weixin",color:"#04BE02",size:"16"}),v:a.o((a=>n.getUser("weixin"))),w:a.p({type:"qq",color:"#66ccff",size:"16"}),x:a.o((a=>n.getUser("qq"))),y:a.s(c.height)}:{},{z:"201"==c.appData.code},(c.appData.code,{}))}]]);wx.createPage(e);
