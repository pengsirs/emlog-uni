"use strict";var t=require("../../../../../common/vendor.js"),s={};const a={name:"node",options:{virtualHost:!0},data:()=>({ctrl:{}}),props:{name:String,attrs:{type:Object,default:()=>({})},childs:Array,opts:Array},components:{node:()=>Promise.resolve().then((function(){return r}))},mounted(){this.$nextTick((()=>{for(this.root=this.$parent;"mp-html"!==this.root.$options.name;this.root=this.root.$parent);}))},beforeDestroy(){},methods:{toJSON(){},play(s){if(this.root.$emit("play"),this.root.pauseVideo){let a=!1;const e=s.target.id;for(let t=this.root._videos.length;t--;)this.root._videos[t].id===e?a=!0:this.root._videos[t].pause();if(!a){const s=t.index.createVideoContext(e,this);s.id=e,this.root._videos.push(s)}}},imgTap(s){const a=this.childs[s.currentTarget.dataset.i];a.a?this.linkTap(a.a):a.attrs.ignore||(this.root.$emit("imgtap",a.attrs),this.root.previewImg&&t.index.previewImage({showmenu:this.root.showImgMenu,current:parseInt(a.attrs.i),urls:this.root.imgList}))},imgLongTap(t){},imgLoad(t){const s=t.currentTarget.dataset.i;this.childs[s].w?(this.opts[1]&&!this.ctrl[s]||-1===this.ctrl[s])&&this.$set(this.ctrl,s,1):this.$set(this.ctrl,s,t.detail.width)},linkTap(s){const a=s.currentTarget?this.childs[s.currentTarget.dataset.i]:{},e=a.attrs||s,r=e.href;this.root.$emit("linktap",Object.assign({innerText:this.root.getText(a.children||[])},e)),r&&("#"===r[0]?this.root.navigateTo(r.substring(1)).catch((()=>{})):r.split("?")[0].includes("://")?this.root.copyLink&&t.index.setClipboardData({data:r,success:()=>t.index.showToast({title:"链接已复制"})}):t.index.navigateTo({url:r,fail(){t.index.switchTab({url:r,fail(){}})}}))},mediaError(t){const s=t.currentTarget.dataset.i,a=this.childs[s];if("video"===a.name||"audio"===a.name){let t=(this.ctrl[s]||0)+1;if(t>a.src.length&&(t=0),t<a.src.length)return void this.$set(this.ctrl,s,t)}else"img"===a.name&&this.opts[2]&&this.$set(this.ctrl,s,-1);this.root&&this.root.$emit("error",{source:a.name,attrs:a.attrs,errMsg:t.detail.errMsg})}}};if(!Array){t.resolveComponent("node")()}"function"==typeof s&&s(a);var e=t._export_sfc(a,[["render",function(s,a,e,r,i,o){return{a:t.f(e.childs,((s,a,r)=>t.e({a:"img"===s.name&&(e.opts[1]&&!i.ctrl[a]||i.ctrl[a]<0)},"img"===s.name&&(e.opts[1]&&!i.ctrl[a]||i.ctrl[a]<0)?{b:t.s(s.attrs.style),c:i.ctrl[a]<0?e.opts[2]:e.opts[1]}:{},{d:"img"===s.name},"img"===s.name?{e:s.attrs.id,f:t.n("_img "+s.attrs.class),g:t.s((-1===i.ctrl[a]?"display:none;":"")+"width:"+(i.ctrl[a]||1)+"px;height:1px;"+s.attrs.style),h:s.attrs.src,i:s.h?s.w?"":"heightFix":"widthFix",j:e.opts[0],k:s.webp,l:e.opts[3]&&!s.attrs.ignore,m:!e.opts[3]||s.attrs.ignore,n:a,o:t.o(((...t)=>o.imgLoad&&o.imgLoad(...t))),p:t.o(((...t)=>o.mediaError&&o.mediaError(...t))),q:t.o(((...t)=>o.imgTap&&o.imgTap(...t))),r:t.o(((...t)=>o.imgLongTap&&o.imgLongTap(...t)))}:s.text?{t:t.t(s.text),v:e.opts[4]}:"br"===s.name?{}:"a"===s.name?{y:"0bf3a19b-0-"+r,z:t.p({name:"span",childs:s.children,opts:e.opts}),A:s.attrs.id,B:t.n((s.attrs.href?"_a ":"")+s.attrs.class),C:t.s("display:inline;"+s.attrs.style),D:a,E:t.o(((...t)=>o.linkTap&&o.linkTap(...t)))}:"video"===s.name?{G:s.attrs.id,H:t.n(s.attrs.class),I:t.s(s.attrs.style),J:s.attrs.autoplay,K:s.attrs.controls,L:s.attrs.loop,M:s.attrs.muted,N:s.attrs["object-fit"],O:s.attrs.poster,P:s.src[i.ctrl[a]||0],Q:a,R:t.o(((...t)=>o.play&&o.play(...t))),S:t.o(((...t)=>o.mediaError&&o.mediaError(...t)))}:"audio"===s.name?{U:s.attrs.id,V:t.n(s.attrs.class),W:t.s(s.attrs.style),X:s.attrs.author,Y:s.attrs.controls,Z:s.attrs.loop,aa:s.attrs.name,ab:s.attrs.poster,ac:s.src[i.ctrl[a]||0],ad:a,ae:t.o(((...t)=>o.play&&o.play(...t))),af:t.o(((...t)=>o.mediaError&&o.mediaError(...t)))}:"table"===s.name&&s.c||"li"===s.name?t.e({ah:"li"===s.name},"li"===s.name?{ai:"0bf3a19b-1-"+r,aj:t.p({childs:s.children,opts:e.opts})}:{ak:t.f(s.children,((s,a,i)=>t.e({a:"td"===s.name||"th"===s.name},"td"===s.name||"th"===s.name?{b:"0bf3a19b-2-"+r+"-"+i,c:t.p({childs:s.children,opts:e.opts})}:{d:t.f(s.children,((s,a,o)=>t.e({a:"td"===s.name||"th"===s.name},"td"===s.name||"th"===s.name?{b:"0bf3a19b-3-"+r+"-"+i+"-"+o,c:t.p({childs:s.children,opts:e.opts}),d:t.n("_"+s.name+" "+s.attrs.class),e:t.s(s.attrs.style)}:{f:t.f(s.children,((s,a,n)=>({a:"0bf3a19b-4-"+r+"-"+i+"-"+o+"-"+n,b:t.p({childs:s.children,opts:e.opts}),c:a,d:t.n("_"+s.name+" "+s.attrs.class),e:t.s(s.attrs.style)}))),g:t.n("_"+s.name+" "+s.attrs.class),h:t.s(s.attrs.style)},{i:a})))},{e:a,f:t.n("_"+s.name+" "+s.attrs.class),g:t.s(s.attrs.style)})))},{al:s.attrs.id,am:t.n("_"+s.name+" "+s.attrs.class),an:t.s(s.attrs.style)}):s.c?2===s.c?{aw:t.f(s.children,((s,a,i)=>({a:a,b:t.s(s.f),c:"0bf3a19b-5-"+r+"-"+i,d:t.p({name:s.name,attrs:s.attrs,childs:s.children,opts:e.opts})}))),ax:s.attrs.id,ay:t.n("_block _"+s.name+" "+s.attrs.class),az:t.s(s.f+";"+s.attrs.style)}:{aA:t.s(s.f),aB:"0bf3a19b-6-"+r,aC:t.p({name:s.name,attrs:s.attrs,childs:s.children,opts:e.opts})}:{ap:s.attrs.id,aq:t.s(s.f+";display:inline"),ar:e.opts[4],as:e.opts[4],at:[s]},{s:s.text,w:"br"===s.name,x:"a"===s.name,F:"video"===s.name,T:"audio"===s.name,ag:"table"===s.name&&s.c||"li"===s.name,ao:!s.c,av:2===s.c,aD:a}))),b:e.attrs.id,c:t.n("_block _"+e.name+" "+e.attrs.class),d:t.s(e.attrs.style)}}]]);wx.createComponent(e);var r=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module"});
